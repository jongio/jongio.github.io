<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>beakn v0.4 - DIY Lync Status Light with Spark Core, WiFi, Batteries, SMD LEDs, On/Off Switch, Ping pong ball and a Cardboard Box | Jon Gallant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="iot" />
    
    <meta name="description" content="Over the past couple of weeks I’ve been working on a Lync Status light called “beakn”. I joined the Windows IoT Maker team not too long ago and have been immersing myself in the Maker space – I’ve bee">
<meta property="og:type" content="article">
<meta property="og:title" content="beakn v0.4 - DIY Lync Status Light with Spark Core, WiFi, Batteries, SMD LEDs, On/Off Switch, Ping pong ball and a Cardboard Box">
<meta property="og:url" content="https://blog.jongallant.com/2014/12/beakn-v0-4-diy-lync-status-light/index.html">
<meta property="og:site_name" content="Jon Gallant">
<meta property="og:description" content="Over the past couple of weeks I’ve been working on a Lync Status light called “beakn”. I joined the Windows IoT Maker team not too long ago and have been immersing myself in the Maker space – I’ve bee">
<meta property="og:image" content="https://blog.jongallant.com/images/blog/1291b2b0c337_C70/P-1335_thumb.jpg">
<meta property="og:updated_time" content="2017-12-19T02:20:11.240Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="beakn v0.4 - DIY Lync Status Light with Spark Core, WiFi, Batteries, SMD LEDs, On/Off Switch, Ping pong ball and a Cardboard Box">
<meta name="twitter:description" content="Over the past couple of weeks I’ve been working on a Lync Status light called “beakn”. I joined the Windows IoT Maker team not too long ago and have been immersing myself in the Maker space – I’ve bee">
<meta name="twitter:image" content="https://blog.jongallant.com/images/blog/1291b2b0c337_C70/P-1335_thumb.jpg">
    

    
        <link rel="alternate" href="http://feeds.feedburner.com/jongallant" title="Jon Gallant" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-1148981-8', 'auto');
    ga('send', 'pageview');

</script>
    
    


</head>


    <body>
        <div id="wrap">
            <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">tech.leadership.music.coffee</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/">Leadership</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Career-Model/">Career Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Productivity/">Productivity</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Review-Model/">Review Model</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Leadership/Work-Life-Balance/">Work:Life Balance</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Musings/">Musings</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/">Tech</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/3D-Printing/">3D Printing</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Announcements/">Announcements</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Azure/">Azure</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Bugs/">Bugs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Career/">Career</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Conferences/">Conferences</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/IoT/">IoT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Jobs/">Jobs</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Microsoft/">Microsoft</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Power-BI/">Power BI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tips/">Tips</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/category/Tech/Tutorials/">Tutorials</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/archives/">Archive</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/contact/">Contact</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
                <div class="container">
                    <div class="main-body container-inner">
                        <div class="main-body-inner">
                            <section id="main">
                                
                                    <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/category/Tech/">Tech</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/category/Tech/IoT/">IoT</a>
    </h1>
</div>

                                        
                                            <div class="main-body-content">
                                                <div class="banner-ad">
                                                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                                                    <!-- banner -->
                                                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509" data-ad-slot="8838481977" data-ad-format="auto"></ins>
                                                    <script>
                                                        (adsbygoogle = window.adsbygoogle || []).push({});
                                                    </script>
                                                </div>
                                                <article id="post-beakn-v0-4-diy-lync-status-light" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        beakn v0.4 - DIY Lync Status Light with Spark Core, WiFi, Batteries, SMD LEDs, On/Off Switch, Ping pong ball and a Cardboard Box
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                
<a href="/2014/12/beakn-v0-4-diy-lync-status-light/" class="article-date">
    <time datetime="2014-12-23T04:31:00.000Z" itemprop="datePublished">2014-12-23</time>
</a>

                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iot/">iot</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p><a href="/images/blog/1291b2b0c337_C70/P-1335.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1335_thumb.jpg" alt="P-1335" title="P-1335"></a>Over the past couple of weeks I’ve been working on a Lync Status light called “<a href="https://blog.jongallant.com/search/label/beakn">beakn</a>”. I <a href="https://blog.jongallant.com/2014/11/iot-devs-needed.html">joined the Windows IoT Maker team</a> not too long ago and have been immersing myself in the Maker space – I’ve been constantly thinking about how to connect everything to the internet and thinking about ways to build products myself. beakn started with an idea of building a completely wireless Lync Status light that I could put anywhere. The concept is simple. It’s a small hardware device that has LEDs that change to the color of your current Lync status. Red, Yellow, Green. I want to be able to have one at home and one at work and would like to stick it on the outside of my office door so people can see my status as they walk by. To achieve that it needs to be wireless – no USB, no ethernet and no power cables. <a href="https://blog.jongallant.com/2014/12/beakn-v0-1-diy-lync-status-light.html">beakn v0.1</a> focused on getting it working with USB and Arduino and executed serial commands. <a href="https://blog.jongallant.com/2014/12/beakn-v0-2-diy-lync-status-light.html">beakn v0.2</a> focused on getting it working with ethernet and Arduino/Netduino. <a href="https://blog.jongallant.com/2014/12/beakn-v0-3-diy-lync-status-light.html">beakn v0.3</a> focused on getting it working with RaspberryPi, C# with Mono and with v0.4&lt; I have achieved my goal of a completely wireless solution with Spark Core WiFi and batteries.</p>
<p>Even though I now work with a team of people who know hardware and the Maker space way better than I do, I resisted the temptation to ask them for too much help. I started with searching the internet and took it one step at a time. I started with Arduino because that is what I had heard of, then Netduino and RaspberryPi. It’s been fun getting exposed to all the different types of boards, but the Spark Core is BY FAR the best experience I have had on this project. For my simple scenario the user experience far exceeds what is provided by Arduino and RaspberryPi out of the box. Spark Core has plenty of pins to connect my LEDS and has WiFi that doesn’t require any extra libraries. (Arduino UNO requires a WiFi shield and WiFi glue code). Spark Core also has a very simple cloud api that allows me to communicate with my device via HTTP. With my other solution I had to rely on an MQTT server – which logically just adds another piece to be concerned about.</p>
<blockquote>
<p>Aside: The WiFi network at Microsoft is WPA2-Enterprise which isn’t support by most of the micro-controller development boards, like RaspberryPi and Arduino. The Intel Edison was the only one that I found to support it. v0.4 will only work with the WiFi protocols that Spark Core supports, which is are simple home network security like WPA/WPA2 or WEP. See their <a href="http://docs.spark.io/troubleshooting/" target="_blank" rel="external">troubleshooting guide</a> if you run into issues. I developed this on my home network and will need to use a hotspot at work or switch to Edison.</p>
</blockquote>
<p>With v0.4 I also experimented with Surface Mount Device (SMD) LEDs and I added a power toggle switch. I still have the ping pong ball diffuser and an upgraded cardboard box. I switched it from the Intel Edison box to the Spark Core box. The Spark Core is tiny and my SMD LEDs are small so I could get away with a very small box.</p>
<h2 id="spark-core-board"><a class="header-anchor" href="#spark-core-board"></a>Spark Core Board</h2>
<p>The pictures speak for themselves. Super small and meets my needs. WiFi. GPIO pins. That’s all I need for this project.</p>
<p><img src="/images/blog/1291b2b0c337_C70/image.png" alt=""></p>
<p>Photon is also coming soon. It’s $19 and it will work for beakn too.</p>
<p><img src="/images/blog/1291b2b0c337_C70/image_4.png" alt=""></p>
<h2 id="spark-ide"><a class="header-anchor" href="#spark-ide"></a>Spark IDE</h2>
<p>The Spark Core development experience is AMAZING. It is all done in the browser. I used Chrome to write the code, build it and deploy it to the Spark Core. They also have a <a href="https://www.spark.io/dev" target="_blank" rel="external">desktop IDE</a> as well that is based on GitHub’s atom.</p>
<p>Here’s a screenshot showing the browser IDE.</p>
<p><img src="/images/blog/1291b2b0c337_C70/image_5.png" alt=""></p>
<p>Here’s the desktop IDE.</p>
<p><img src="/images/blog/1291b2b0c337_C70/image_6.png" alt=""></p>
<p>The other cool thing is that anyone can contribute libraries to Spark Core via GitHub. Check <a href="https://github.com/spark/uber-library-example/#getting-started" target="_blank" rel="external">this out</a> for more info. I contributed a “beakn” library so if you are building this then try searching the library for beakn and you should pull up the sample file.</p>
<p><img src="/images/blog/1291b2b0c337_C70/image_7.png" alt=""></p>
<p>I was truly impressed with Spark Core. From initial setup to the IDE to the cloud apis to the very small form factor…everything was just perfect. The best thing about it is that I feel inspired to development more and I feel like I can actually get some other project ideas quickly off the ground. Products like this should first and foremost “inspire people to create” and the Spark Core definitely did that for me.</p>
<h2 id="wifi"><a class="header-anchor" href="#wifi"></a>WiFi</h2>
<p>For WiFi I didn’t have to do much. I just went through the <a href="http://docs.spark.io/start/" target="_blank" rel="external">Spark Core getting started guide</a> and connected my Spark Core to my WiFi using the iPhone app. No libraries to import. It just works.</p>
<h2 id="lights"><a class="header-anchor" href="#lights"></a>Lights</h2>
<p>For SMD LEDs I have to admit that I asked someone on the team how to do solder them and he gave me a good lesson. I experimented a bunch with different ways to get them to attach to the protoboard and run wires to pins. With my first version I attached small pieces of wire wrapping wire to each LED, but with the second version I ran a single wire down each side. I reduced the resistance as well; I went from a 220ohm resistor to a 47ohm resistor. I’m not 100% sure that value is right, but it’s what an online ohms law calculator gave me – 3.3v and 20ma per LED.</p>
<p>If you aren’t comfortable with SMD LEDs then I recommend going with any of the designs from v0.1, v0.2 or v0.3 which use 10mm big LEDs. Either option will work just fine.</p>
<h2 id="diffuser"><a class="header-anchor" href="#diffuser"></a>Diffuser</h2>
<p>I get a lot of compliments about using a ping pong ball, but of course that won’t be in the final product. This round I experimented with a clear plastic diffuser, but wasn’t happy with the results so I went back to the ping pong ball.</p>
<h2 id="power"><a class="header-anchor" href="#power"></a>Power</h2>
<p>My goal of developing a wireless device means it needs to run on battery. The Spark Core runs on 3.3V DC and needs an Input voltage of 3.6 to 6.0 volts. On <a href="http://docs.spark.io/hardware/" target="_blank" rel="external">this page</a> they recommend a 3.6V LiPo or 4AAs. I had the 4AA battery case so that is what I went with.</p>
<p>Since the beakn is now battery powered I threw a toggle switch in the circuit as well.</p>
<h2 id="build-the-beakn-hardware"><a class="header-anchor" href="#build-the-beakn-hardware"></a>Build the beakn Hardware</h2>
<h3 id="parts-you-will-need-the-following-to-build-beakn-v0-4"><a class="header-anchor" href="#parts-you-will-need-the-following-to-build-beakn-v0-4"></a>Parts – You will need the following to build beakn v0.4</h3>
<ul>
<li><a href="https://store.spark.io/" target="_blank" rel="external">Spark Core</a> – $39</li>
<li>Ping pong ball</li>
<li>Small Cardboard box</li>
<li>Duct Tape</li>
<li>4x AA Batteries &amp; <a href="http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&amp;field-keywords=4aa%20battery%20holder&amp;sprefix=4aa+b%2Caps" target="_blank" rel="external">4AABattery Holder</a></li>
<li><a href="http://www.amazon.com/Pins-Positions-DPDT-Slide-Switch/dp/B008P720ZS/ref=sr_1_15?ie=UTF8&amp;qid=1419330976&amp;sr=8-15&amp;keywords=6+pin+toggle+switch" target="_blank" rel="external">ToggleSwitch</a> – I used the one that came with the Spark Core maker kit</li>
<li>Small LED Route – Requires soldering</li>
</ul>
<!--StartFragment-->*   SMD LEDs – 3 Red, 3 Yellow, 3 Green – I found them at [SuperBrightLeds.com](https://www.superbrightleds.com/search/led-products/5050/) –You could also go with [RGBLEDs](https://www.sparkfun.com/products/10866), but you'd have to change the code a bit. I will eventually dowith RGB LEDs in a future version.
<ul>
<li><a href="http://www.amazon.com/s/ref=nb_sb_noss_2?url=search-alias%3Daps&amp;field-keywords=wire+wrapping+wire&amp;rh=i%3Aaps%2Ck%3Awire+wrapping+wire" target="_blank" rel="external">WireWrapping Wire</a> – To connect LEDs on PCB to pins</li>
<li>4x <a href="https://www.sparkfun.com/products/116" target="_blank" rel="external">.1&quot; PitchHeaders</a> – To connect LEDs to Spark Core</li>
<li>4x Female to Female Jumper Wires – To connect LEDs to Spark Core</li>
<li>2x Male to Female Jumper Wires – To connect Toggle Switch</li>
<li><a href="http://www.alliedelec.com/search/productdetail.aspx?SKU=70012454" target="_blank" rel="external">Prototyping Board</a></li>
<li>Tweezers</li>
<li>Wire Cutters/Strippers</li>
<li>Heat Shrink</li>
<li>Soldering Iron</li>
<li>Solder</li>
<li>Heat gun or hair dryer – To shrink the heat shrink</li>
<li>Drill</li>
<li>1/4&quot; Drill Bit*   Big LED Route – Doesn’t require soldering</li>
</ul>
<h3 id="the-box"><a class="header-anchor" href="#the-box"></a>The Box</h3>
<p>1. Get a clean box by removing any extra cardboard that is inside it.</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1158.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1158_thumb.jpg" alt="P-1158" title="P-1158"></a></p>
<p>2. Cut a hole in the front for the toggle switch.</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1313.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1313_thumb.jpg" alt="P-1313" title="P-1313"></a></p>
<p>3. Cut a hold in the top for the lights.</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1306.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1306_thumb.jpg" alt="P-1306" title="P-1306"></a></p>
<h3 id="the-ball"><a class="header-anchor" href="#the-ball"></a>The Ball</h3>
<p>Cut a hole in the bottom of the ping pong ball and duct tape it to the hole in the top of the box.</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1320.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1320_thumb.jpg" alt="P-1320" title="P-1320"></a></p>
<h3 id="the-smd-led-array"><a class="header-anchor" href="#the-smd-led-array"></a>The SMD LED Array</h3>
<p>1. Drill a 3x3 grid into the Prototyping board to hold the LEDs in place. You are going to run wire to connect the negative and positive terminals so make sure all the sides are the same. Negative on right, positive on left for all of them. The negative side has a little notch in the corner.</p>
<p>2. Dab a very small amount of solder to connect all three leads of each side.</p>
<p>3. Lay a piece of wire wrapping wire across the negative side and solder in place. Do the same for positive and do for all 9 LEDs.</p>
<p>4. Connect all of the negative wires together with a 47ohm resistor and solder to a header. Be sure to keep the insulation on the wire because the positive wires will run on top of them.</p>
<p>5. Connect each positive wire of each row of LEDs to a header pin.</p>
<p>6. Duct tape the board to the top of the box.</p>
<p>7. Use the female to female wires to connect the headers to the Spark Core</p>
<ul>
<li>Red: D5</li>
<li>Yellow: D6</li>
<li>Green: D7</li>
<li>Ground: GND</li>
</ul>
<p><a href="/images/blog/1291b2b0c337_C70/P-1288.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1288_thumb.jpg" alt="P-1288" title="P-1288"></a><a href="/images/blog/1291b2b0c337_C70/P-1293.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1293_thumb.jpg" alt="P-1293" title="P-1293"></a><a href="/images/blog/1291b2b0c337_C70/P-1296.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1296_thumb.jpg" alt="P-1296" title="P-1296"></a><a href="/images/blog/1291b2b0c337_C70/P-1312.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1312_thumb.jpg" alt="P-1312" title="P-1312"></a><a href="/images/blog/1291b2b0c337_C70/P-1319.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1319_thumb.jpg" alt="P-1319" title="P-1319"></a></p>
<h3 id="the-batteries-and-toggle-switch"><a class="header-anchor" href="#the-batteries-and-toggle-switch"></a>The Batteries and Toggle Switch</h3>
<p>Your battery holder likely came with tinned ends. Cut the 2x male to female jumper wires and solder the switch in between them. <a href="http://www.learningaboutelectronics.com/Articles/Toggle-switch-wiring.php" target="_blank" rel="external">This page</a> was helpful when researching toggle switch wiring.</p>
<p>Connect the red wire to Spark Core VIN and the black wire to Spark Core GND.</p>
<p>Put the batteries in the battery holder and you should see the Spark Core start up.</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1170.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1170_thumb.jpg" alt="P-1170" title="P-1170"></a><a href="/images/blog/1291b2b0c337_C70/P-1176.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1176_thumb.jpg" alt="P-1176" title="P-1176"></a><a href="/images/blog/1291b2b0c337_C70/P-1185.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1185_thumb.jpg" alt="P-1185" title="P-1185"></a><a href="/images/blog/1291b2b0c337_C70/P-1273.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1273_thumb.jpg" alt="P-1273" title="P-1273"></a></p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1315.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1315_thumb.jpg" alt="P-1315" title="P-1315"></a></p>
<h3 id="the-final-product"><a class="header-anchor" href="#the-final-product"></a>The final product</h3>
<p><a href="/images/blog/1291b2b0c337_C70/P-1316.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1316_thumb.jpg" alt="P-1316" title="P-1316"></a></p>
<h2 id="install-the-beakn-desktop-application"><a class="header-anchor" href="#install-the-beakn-desktop-application"></a>Install the beakn Desktop Application</h2>
<p>The beakn desktop application runs in the background and listens for Lync status changes. When that occurs it issues an HTTP request to the Spark Cloud API to tell the device what color to show. I found this VERY helpful library called <a href="https://github.com/kareem613/SharpSpark" target="_blank" rel="external">SharpSpark</a>. It was super easy to use – I’ve asked them to put on nuget, but for now you have to get the code and build it locally.</p>
<p>To install the desktop app you can:</p>
<p>1. Get the source, build it and run it: <a href="https://github.com/jonbgallant/beakn/tree/master/desktop" title="https://github.com/jonbgallant/beakn/tree/master/desktop" target="_blank" rel="external">https://github.com/jonbgallant/beakn/tree/master/desktop</a></p>
<p>2. Install via the v0.4 MSI: <a href="https://github.com/jonbgallant/beakn/releases/download/v0.4/beakn.v0.4.msi" title="https://github.com/jonbgallant/beakn/releases/download/v0.4/beakn.v0.4.msi" target="_blank" rel="external">https://github.com/jonbgallant/beakn/releases/download/v0.4/beakn.v0.4.msi</a></p>
<p>After you install it you are going to need to modify the config to use your Spark Core keys.</p>
<p>1. If beakn.exe is running you’ll need to stop it.</p>
<p>2. Open a CMD prompt as Admin and open beakn.exe.config in notepad.</p>
<p>3. Change the Protocol setting to “SparkCore”</p>
<p>4. Change the AccessToken and DeviceId to the IDs you get from <a href="http://Spark.io" target="_blank" rel="external">Spark.io</a></p>
<pre><code>&amp;lt;add key=&quot;SparkCoreAccessToken&quot; value=&quot;&quot;/&amp;gt; // [http://spark.io](http://spark.io) – click on settings in lower left
 &amp;lt;add key=&quot;SparkCoreDeviceId&quot; value=&quot;&quot;/&amp;gt; // [http://spark.io](http://spark.io) – click on cores in lower left, select your core
</code></pre>
<p>5. Save it.</p>
<p>6. Double-click on beakn.exe to restart it.</p>
<h2 id="install-the-spark-core-beakn-code"><a class="header-anchor" href="#install-the-spark-core-beakn-code"></a>Install the Spark Core beakn Code</h2>
<p>This is the code that sits on your Spark Core. It is going to set the appropriate LED color. You will notice that there is a call to “Spark.function(“setStatus”, setStatus);” That is a method included in the Spark Core development experience. It sets up the setStatus function as a function that can be called via HTTP with their Cloud API. Amazingly simple. This functionality was much more code in my previous versions because I had to talk to MQTT servers directly.</p>
<p>You can get the code in two ways:</p>
<p>1. Search the Spark libraries for “beakn”. <a href="http://spark.io" target="_blank" rel="external">http://spark.io</a>, Libraries, search for beakn. Directly use the beakn-sparkcore.ino example file.</p>
<p>2. Go to the beakn-sparkcore GitHub repository and copy the code to the Spark Core IDE and deploy to your device. <a href="https://raw.githubusercontent.com/jonbgallant/beakn-sparkcore/master/firmware/examples/beakn-sparkcore.ino" title="https://raw.githubusercontent.com/jonbgallant/beakn-sparkcore/master/firmware/examples/beakn-sparkcore.ino" target="_blank" rel="external">https://raw.githubusercontent.com/jonbgallant/beakn-sparkcore/master/firmware/examples/beakn-sparkcore.ino</a></p>
<h2 id="fire-it-up"><a class="header-anchor" href="#fire-it-up"></a>Fire it up</h2>
<p>Turn on your beakn using your toggle switch. It will flash red, yellow and then green when it starts up. After that you’ll need to change your Lync status to get it initialized. (I’m researching ways to automatically pull the latest status – for now just toggle).</p>
<p><a href="/images/blog/1291b2b0c337_C70/P-1335_3.jpg"><img src="/images/blog/1291b2b0c337_C70/P-1335_thumb_3.jpg" alt="P-1335" title="P-1335"></a></p>
<p>This version was definitely more involved than the others. The SMD LEDs and custom protoboard made it fun, but also more challenging. I had a blast building it. I look forward to seeing what you do with it.</p>
<p>Jon</p>

        </div>
        <footer>
        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>


                                            </div>
                                            <div style="width:64%;margin:auto;" data-type="ad" data-publisher="lqm.jongallant.site" data-format="728x90" data-zone="ros"
                                                data-tags="iot%2cangularjs%2cjavascript%2cnode%2cazureiot%2cazure%2cpowerbi%2cseattle%2cdeveloper%2cmicrosoft%2ctutorials"></div>
                            </section>
                            <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar">
        <i class="toggle icon"></i>
    </a>
    <div class="sidebar-top">

        <ul class="social-links">
            
                
                    <li>
                        <a class="social-tooltip" title="twitter" href="http://twitter.com/jongallant" target="_blank">
                            <i class="icon fa fa-twitter"></i>
                        </a>
                    </li>
                    
                        
                
                    <li>
                        <a class="social-tooltip" title="github" href="https://github.com/jonbgallant" target="_blank">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                        
                
                    <li>
                        <a class="social-tooltip" title="rss" href="http://feeds.feedburner.com/jongallant" target="_blank">
                            <i class="icon fa fa-rss"></i>
                        </a>
                    </li>
                    
                        
                
                    <li>
                        <a class="social-tooltip" title="linkedin" href="http://www.linkedin.com/in/jongallant" target="_blank">
                            <i class="icon fa fa-linkedin"></i>
                        </a>
                    </li>
                    
                        
                
                    <li>
                        <a class="social-tooltip" title="youtube" href="https://www.youtube.com/channel/UCcEFb5apnJUMC7npvsoozTQ" target="_blank">
                            <i class="icon fa fa-youtube"></i>
                        </a>
                    </li>
                    
                        
        </ul>
    </div>
    
        
    <nav id="article-nav">
        
            <a href="/2014/12/unable-to-download-data-from-rubygems/" id="article-nav-newer" class="article-nav-link-wrap">
                <strong class="article-nav-caption">
                    newer
                </strong>
                <p class="article-nav-title">
                    
                        Solution to: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
                            
                </p>
                <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>

            </a>
            
                
                    <a href="/2014/12/beakn-v0-3-diy-lync-status-light/" id="article-nav-older" class="article-nav-link-wrap">
                        <strong class="article-nav-caption">
                            older
                        </strong>
                        <p class="article-nav-title">
                            beakn v0.3 : DIY Lync Status Light with a RaspberryPi, .NET, Mono and MQTT
                        </p>
                        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>

                    </a>
                    
    </nav>
    
            

                <div class="widgets-container">
                    
                        
                            <br/>
<div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/videoseries?list=PLiMIJTv6gK5_Zmdcmbo-kxAbpeGjSou9x&amp;showinfo=0?ecver=2" width="640" height="360" frameborder="0" gesture="media" allow="encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>
<br/>
                                
                            <a class="twitter-timeline" data-height="700" href="https://twitter.com/jongallant?ref_src=twsrc%5Etfw"></a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                
                                <div style="width:88%;margin:auto;" data-type="ad" data-publisher="lqm.jongallant.site" data-format="300x250" data-zone="ros" data-tags="iot%2cangularjs%2cjavascript%2cnode%2cazureiot%2cazure%2cpowerbi%2cseattle%2cdeveloper%2cmicrosoft%2ctutorials"></div>

                                
                                    

                                        <div class="rail-ad">
                                            <!-- rail -->
                                            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7253926757222509" data-ad-slot="7222147978" data-ad-format="auto"></ins>
                                            <script>
                                                (adsbygoogle = window.adsbygoogle || []).push({});
                                            </script>
                                        </div>
                </div>

</aside>
                        </div>
                    </div>
                </div>
                <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo-n"></a>
                </h1>
                <p>&copy; 2018 Jon Gallant</p>
                <p>Disclaimer: The opinions expressed herein are my own personal opinions and do not represent my employer’s view in any way.</p>
            </div>
            
        </div>
    </div>
</footer>
                    
    
    <script>
    var disqus_shortname = 'jongallant';
    
    
    var disqus_url = 'https://blog.jongallant.com/2014/12/beakn-v0-4-diy-lync-status-light/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

        </div>

        <script type='text/javascript'>
            function _dmBootstrap(file) {
                var _dma = document.createElement('script');
                _dma.type = 'text/javascript';
                _dma.async = true;
                _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
            }
            function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js'); }
            (function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000); })();
        </script>
    </body>

    </html>